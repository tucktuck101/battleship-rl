==== SYSTEM INFO ====
Fri Nov 14 23:40:30 NZDT 2025

---- OS ----
Darwin Jeffs-MacBook-Pro.local 24.6.0 Darwin Kernel Version 24.6.0: Mon Aug 11 21:16:05 PDT 2025; root:xnu-11417.140.69.701.11~1/RELEASE_X86_64 x86_64
ProductName:		macOS
ProductVersion:		15.7.1
BuildVersion:		24G231

---- Docker ----
Client:
 Version:           28.5.1
 API version:       1.51
 Go version:        go1.24.8
 Git commit:        e180ab8
 Built:             Wed Oct  8 12:16:17 2025
 OS/Arch:           darwin/amd64
 Context:           desktop-linux

Server: Docker Desktop 4.50.0 (209931)
 Engine:
  Version:          28.5.1
  API version:      1.51 (minimum version 1.24)
  Go version:       go1.24.8
  Git commit:       f8215cc
  Built:            Wed Oct  8 12:17:24 2025
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.7.27
  GitCommit:        05044ec0a9a75232cad458027ca83437aae3f4da
 runc:
  Version:          1.2.5
  GitCommit:        v1.2.5-0-g59923ef
 docker-init:
  Version:          0.19.0
  GitCommit:        de40ad0

---- Docker Compose ----
Docker Compose version v2.40.3-desktop.1

==== COMPOSE CONFIG (from docker-compose.training.yml) ====
name: battleship-rl
services:
  grafana:
    depends_on:
      # loki removed for compute savings:
        condition: service_started
        required: true
      prometheus:
        condition: service_started
        required: true
      # tempo removed for compute savings:
        condition: service_started
        required: true
    image: grafana/grafana:latest
    networks:
      monitoring: null
    ports:
      - mode: ingress
        target: 3000
        published: "3000"
        protocol: tcp
    volumes:
      - type: bind
        source: /Users/jeff/dev_projects/Python_refresh/Battleships/battleship-rl/ops/grafana/provisioning
        target: /etc/grafana/provisioning
        read_only: true
        bind:
          create_host_path: true
  grafana-alloy:
    command:
      - run
      - /etc/alloy/config.river
      - --storage.path=/var/lib/alloy
    image: grafana/alloy:latest
    networks:
      monitoring: null
    ports:
      - mode: ingress
        target: 4317
        published: "4317"
        protocol: tcp
      - mode: ingress
        target: 4318
        published: "4318"
        protocol: tcp
    volumes:
      - type: bind
        source: /Users/jeff/dev_projects/Python_refresh/Battleships/battleship-rl/ops/alloy/config.river
        target: /etc/alloy/config.river
        read_only: true
        bind:
          create_host_path: true
      - type: volume
        source: alloy-data
        target: /var/lib/alloy
        volume: {}
  # loki removed for compute savings:
    image: grafana/# loki removed for compute savings:latest
    networks:
      monitoring: null
    ports:
      - mode: ingress
        target: 3100
        published: "3100"
        protocol: tcp
    volumes:
      - type: volume
        source: # loki removed for compute savings-data
        target: /var/# loki removed for compute savings
        volume: {}
  prometheus:
    command:
      - --config.file=/etc/prometheus/prometheus.yml
      - --web.enable-remote-write-receiver
    depends_on:
      grafana-alloy:
        condition: service_started
        required: true
    image: prom/prometheus:latest
    networks:
      monitoring: null
    ports:
      - mode: ingress
        target: 9090
        published: "9090"
        protocol: tcp
    volumes:
      - type: bind
        source: /Users/jeff/dev_projects/Python_refresh/Battleships/battleship-rl/ops/prometheus/prometheus.yml
        target: /etc/prometheus/prometheus.yml
        read_only: true
        bind:
          create_host_path: true
  # tempo removed for compute savings:
    command:
      - -config.file=/etc/# tempo removed for compute savings/# tempo removed for compute savings.yaml
    image: grafana/# tempo removed for compute savings:latest
    networks:
      monitoring: null
    ports:
      - mode: ingress
        target: 3200
        published: "3200"
        protocol: tcp
    volumes:
      - type: bind
        source: /Users/jeff/dev_projects/Python_refresh/Battleships/battleship-rl/ops/# tempo removed for compute savings/# tempo removed for compute savings.yaml
        target: /etc/# tempo removed for compute savings/# tempo removed for compute savings.yaml
        read_only: true
        bind:
          create_host_path: true
      - type: volume
        source: # tempo removed for compute savings-data
        target: /var/# tempo removed for compute savings
        volume: {}
  trainer:
    build:
      context: /Users/jeff/dev_projects/Python_refresh/Battleships/battleship-rl
      dockerfile: Dockerfile.trainer
    depends_on:
      grafana-alloy:
        condition: service_started
        required: true
    environment:
      OTEL_EXPORTER_OTLP_ENDPOINT: http://grafana-alloy:4317
      OTEL_EXPORTER_OTLP_PROTOCOL: grpc
      OTEL_RESOURCE_ATTRIBUTES: service.name=battleship-trainer,service.namespace=ml
    networks:
      monitoring: null
    volumes:
      - type: bind
        source: /Users/jeff/dev_projects/Python_refresh/Battleships/battleship-rl/training_artifacts
        target: /app/training_artifacts
        bind:
          create_host_path: true
networks:
  monitoring:
    name: battleship-rl_monitoring
volumes:
  alloy-data:
    name: battleship-rl_alloy-data
  # loki removed for compute savings-data:
    name: battleship-rl_# loki removed for compute savings-data
  # tempo removed for compute savings-data:
    name: battleship-rl_# tempo removed for compute savings-data

==== COMPOSE PS (current state) ====
NAME      IMAGE     COMMAND   SERVICE   CREATED   STATUS    PORTS

==== DOCKER NETWORKS ====
NETWORK ID     NAME                       DRIVER    SCOPE
bff0e21a3cf2   battleship-rl_monitoring   bridge    local
f1012637cbd3   bridge                     bridge    local
8c3af435de3b   host                       host      local
ca20d8447dbf   kind                       bridge    local
e6b2603769f3   none                       null      local

---- Monitoring network details (best-guess) ----
Inspecting network: battleship-rl_monitoring
[
    {
        "Name": "battleship-rl_monitoring",
        "Id": "bff0e21a3cf233974df45f20e2e0c39f8372065f062a2e9101c6ea2f875b5606",
        "Created": "2025-11-14T10:29:48.311496255Z",
        "Scope": "local",
        "Driver": "bridge",
        "EnableIPv4": true,
        "EnableIPv6": false,
        "IPAM": {
            "Driver": "default",
            "Options": null,
            "Config": [
                {
                    "Subnet": "172.19.0.0/16",
                    "Gateway": "172.19.0.1"
                }
            ]
        },
        "Internal": false,
        "Attachable": false,
        "Ingress": false,
        "ConfigFrom": {
            "Network": ""
        },
        "ConfigOnly": false,
        "Containers": {},
        "Options": {
            "com.docker.network.enable_ipv4": "true",
            "com.docker.network.enable_ipv6": "false"
        },
        "Labels": {
            "com.docker.compose.config-hash": "87aea64bbba0d8d8d689741ea906c83a0ae3e5905932a6517f9beb8881d74f32",
            "com.docker.compose.network": "monitoring",
            "com.docker.compose.project": "battleship-rl",
            "com.docker.compose.version": "2.40.3"
        }
    }
]

==== CONTAINER IDS (from compose) ====
trainer: <no container>
grafana-alloy: <no container>
# tempo removed for compute savings: <no container>
# loki removed for compute savings: <no container>
prometheus: <no container>
grafana: <no container>

==== GRAFANA ALLOY LOGS (last 200 lines) ====
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:29:57: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 28 |     traces = {
grafana-alloy-1  | 29 |       receivers = [otelcol.receiver.otlp.default.output]
grafana-alloy-1  |    |
grafana-alloy-1  | 30 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:30:60: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 29 |       receivers = [otelcol.receiver.otlp.default.output]
grafana-alloy-1  | 30 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  |    |
grafana-alloy-1  | 31 |       exporters = [otelcol.exporter.otlp.# tempo removed for compute savings.input]
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:31:54: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 30 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  | 31 |       exporters = [otelcol.exporter.otlp.# tempo removed for compute savings.input]
grafana-alloy-1  |    |
grafana-alloy-1  | 32 |     }
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:32:6: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 31 |       exporters = [otelcol.exporter.otlp.# tempo removed for compute savings.input]
grafana-alloy-1  | 32 |     }
grafana-alloy-1  |    |
grafana-alloy-1  | 33 |     metrics = {
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:34:57: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 33 |     metrics = {
grafana-alloy-1  | 34 |       receivers = [otelcol.receiver.otlp.default.output]
grafana-alloy-1  |    |
grafana-alloy-1  | 35 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:35:60: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 34 |       receivers = [otelcol.receiver.otlp.default.output]
grafana-alloy-1  | 35 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  |    |
grafana-alloy-1  | 36 |       exporters = [otelcol.exporter.prometheus.default.input]
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:36:62: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 35 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  | 36 |       exporters = [otelcol.exporter.prometheus.default.input]
grafana-alloy-1  |    |
grafana-alloy-1  | 37 |     }
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:37:6: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 36 |       exporters = [otelcol.exporter.prometheus.default.input]
grafana-alloy-1  | 37 |     }
grafana-alloy-1  |    |
grafana-alloy-1  | 38 |     logs = {
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:39:57: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 38 |     logs = {
grafana-alloy-1  | 39 |       receivers = [otelcol.receiver.otlp.default.output]
grafana-alloy-1  |    |
grafana-alloy-1  | 40 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:40:60: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 39 |       receivers = [otelcol.receiver.otlp.default.output]
grafana-alloy-1  | 40 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  |    |
grafana-alloy-1  | 41 |       exporters = [otelcol.exporter.otlphttp.# loki removed for compute savings.input]
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:41:57: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 40 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  | 41 |       exporters = [otelcol.exporter.otlphttp.# loki removed for compute savings.input]
grafana-alloy-1  |    |
grafana-alloy-1  | 42 |     }
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:42:6: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 41 |       exporters = [otelcol.exporter.otlphttp.# loki removed for compute savings.input]
grafana-alloy-1  | 42 |     }
grafana-alloy-1  |    |
grafana-alloy-1  | 43 |   }
grafana-alloy-1  | interrupt received
grafana-alloy-1  | Error: could not perform the initial load successfully
grafana-alloy-1  | Error: /etc/alloy/config.river:29:57: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 28 |     traces = {
grafana-alloy-1  | 29 |       receivers = [otelcol.receiver.otlp.default.output]
grafana-alloy-1  |    |
grafana-alloy-1  | 30 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:30:60: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 29 |       receivers = [otelcol.receiver.otlp.default.output]
grafana-alloy-1  | 30 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  |    |
grafana-alloy-1  | 31 |       exporters = [otelcol.exporter.otlp.# tempo removed for compute savings.input]
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:31:54: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 30 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  | 31 |       exporters = [otelcol.exporter.otlp.# tempo removed for compute savings.input]
grafana-alloy-1  |    |
grafana-alloy-1  | 32 |     },
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:34:57: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 33 |     metrics = {
grafana-alloy-1  | 34 |       receivers = [otelcol.receiver.otlp.default.output]
grafana-alloy-1  |    |
grafana-alloy-1  | 35 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:35:60: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 34 |       receivers = [otelcol.receiver.otlp.default.output]
grafana-alloy-1  | 35 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  |    |
grafana-alloy-1  | 36 |       exporters = [otelcol.exporter.prometheus.default.input]
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:36:62: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 35 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  | 36 |       exporters = [otelcol.exporter.prometheus.default.input]
grafana-alloy-1  |    |
grafana-alloy-1  | 37 |     },
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:39:57: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 38 |     logs = {
grafana-alloy-1  | 39 |       receivers = [otelcol.receiver.otlp.default.output]
grafana-alloy-1  |    |
grafana-alloy-1  | 40 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:40:60: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 39 |       receivers = [otelcol.receiver.otlp.default.output]
grafana-alloy-1  | 40 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  |    |
grafana-alloy-1  | 41 |       exporters = [otelcol.exporter.otlphttp.# loki removed for compute savings.input]
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:41:57: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 40 |       processors = [otelcol.processor.batch.default.output]
grafana-alloy-1  | 41 |       exporters = [otelcol.exporter.otlphttp.# loki removed for compute savings.input]
grafana-alloy-1  |    |
grafana-alloy-1  | 42 |     }
grafana-alloy-1  |
grafana-alloy-1  | Error: /etc/alloy/config.river:42:6: missing ',' in field list
grafana-alloy-1  |
grafana-alloy-1  | 41 |       exporters = [otelcol.exporter.otlphttp.# loki removed for compute savings.input]
grafana-alloy-1  | 42 |     }
grafana-alloy-1  |    |
grafana-alloy-1  | 43 |   }
grafana-alloy-1  | interrupt received
grafana-alloy-1  |
grafana-alloy-1  | Error: could not perform the initial load successfully

==== TEMPO LOGS (last 200 lines) ====

==== TRAINER LOGS (last 100 lines) ====

==== PROMETHEUS LOGS (last 100 lines) ====

==== GRAFANA LOGS (last 100 lines) ====

==== LOKI LOGS (last 100 lines) ====

==== GRAFANA ALLOY CONFIG (ops/alloy/config.river) ====
otelcol.receiver.otlp "default" {
  grpc {
    endpoint = "0.0.0.0:4317"
  }

  http {
    endpoint = "0.0.0.0:4318"
  }

  output {
    metrics = [otelcol.processor.batch.default.input]
    logs    = [otelcol.processor.batch.default.input]
    traces  = [otelcol.processor.batch.default.input]
  }
}

otelcol.processor.batch "default" {
  output {
    metrics = [otelcol.exporter.prometheus.default.input]
    logs    = [otelcol.exporter.# loki removed for compute savings.default.input]
    traces  = [otelcol.exporter.otlp.# tempo removed for compute savings.input]
  }
}

otelcol.exporter.otlp "# tempo removed for compute savings" {
  client {
    endpoint = "# tempo removed for compute savings:9095"
    tls {
      insecure = true
    }
  }
}

otelcol.exporter.prometheus "default" {
  forward_to = [prometheus.remote_write.default.receiver]
}

prometheus.remote_write "default" {
  endpoint {
    url = "http://prometheus:9090/api/v1/write"
  }
}

otelcol.exporter.# loki removed for compute savings "default" {
  forward_to = [# loki removed for compute savings.write.default.receiver]
}

# loki removed for compute savings.write "default" {
  endpoint {
    url = "http://# loki removed for compute savings:3100/# loki removed for compute savings/api/v1/push"
  }
}

==== TEMPO CONFIG (ops/# tempo removed for compute savings/# tempo removed for compute savings.yaml) ====
server:
  http_listen_port: 3200
  grpc_listen_port: 9095

distributor:
  receivers:
    otlp:
      protocols:
        grpc:
        http:

ingester:
  trace_idle_period: 10s
  max_block_bytes: 1000000
  max_block_duration: 5m

compactor:
  compaction:
    block_retention: 24h

storage:
  trace:
    backend: local
    local:
      path: /var/# tempo removed for compute savings/traces
    block:
      bloom_filter_false_positive: 0.05
      version: v2

==== PROMETHEUS CONFIG (ops/prometheus/prometheus.yml) ====
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: "prometheus"
    static_configs:
      - targets: ["prometheus:9090"]
  - job_name: "# tempo removed for compute savings"
    static_configs:
      - targets: ["# tempo removed for compute savings:3200"]
  - job_name: "# loki removed for compute savings"
    static_configs:
      - targets: ["# loki removed for compute savings:3100"]

==== GRAFANA PROVISIONING TREE (ops/grafana/provisioning) ====
ops/grafana/provisioning/datasources/datasources.yml

==== TRAINER ENV VARS (from container) ====
Trainer container not found

==== GRAFANA ALLOY ENV VARS (from container) ====
grafana-alloy container not found

==== BASIC CONNECTIVITY CHECK (host -> alloy -> # tempo removed for compute savings) ====
Host -> grafana-alloy ports:
nc: connectx to localhost port 4317 (tcp) failed: Connection refused
nc: connectx to localhost port 4317 (tcp) failed: Connection refused
nc to localhost:4317 failed (alloy gRPC?)
nc: connectx to localhost port 4318 (tcp) failed: Connection refused
nc: connectx to localhost port 4318 (tcp) failed: Connection refused
nc to localhost:4318 failed (alloy HTTP?)

If you want deeper connectivity tests (inside the network), we can add a small helper container once we see this output.

==== END OF MONITORING DIAGNOSTICS ====
