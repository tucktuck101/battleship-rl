# Observability Catalogue

Source of truth for Battleship RL signals (metrics, traces, logs, etc.).
Populate each row as we formalize new telemetry.

## Column Schema

| Column Name | Column Data Type | Column Description |
|-------------|------------------|--------------------|
| SLO Group / Domain | string | High-level category the SLO belongs to (Learning, Performance, Stability, Exploration, Environment, Observability Pipeline). |
| SLO ID | string | Short unique identifier for the SLO (e.g. `SLO-LRN-001`). |
| SLO Name | string | Human-readable name of the SLO. |
| SLO Objective / Target | string | The reliability goal or threshold (e.g. “≥ 60% win rate over last 1000 episodes”). |
| SLO Window / Error Budget Notes | string | Measurement window and notes on error budget handling. |
| SLI Name | string | Name of the Service Level Indicator used to measure the SLO. |
| SLI Definition | string | Plain-language description of what the SLI measures. |
| SLI Formula (Logical) | string | Backend-agnostic conceptual calculation of the SLI. |
| SLI Backend (Authoritative) | enum (Prometheus, Loki, Tempo, multi-value) | Backend(s) considered authoritative for computing the SLI. |
| Friendly Name | string | Human-friendly name of the telemetry signal. |
| Signal Type | enum (metric, log, trace) | Type of telemetry object emitted. |
| Subtype | enum (counter, gauge, histogram, span, log-event, etc.) | Specific metric or signal subtype. |
| Canonical Name | string | Actual exported metric/log/span name. |
| Description | string | Description of what the signal represents. |
| Attributes / Labels | list<string> | Label keys applied to the signal (e.g. `run_id`, `episode`, `agent_id`). |
| Cardinality Notes | string | Expected cardinality and constraints or considerations. |
| Prometheus? | boolean (Y/N) | Whether this signal is stored and queryable in Prometheus. |
| Prometheus Query | string | Example PromQL query used to validate or compute SLI. Empty if Prometheus? = No. |
| Loki? | boolean (Y/N) | Whether this signal is stored and queryable in Loki. |
| Loki Query | string | Example LogQL query for validation or analysis. Empty if Loki? = No. |
| Tempo? | boolean (Y/N) | Whether this signal is stored and queryable in Tempo. |
| Tempo Query | string | Example Tempo search or filter query. Empty if Tempo? = No. |
| OTLP Export Path / Env Vars | string | How the signal is exported to the collector (env vars, endpoint, exporter config). |
| Collector Receiver | enum (otlp/grpc, otlp/http, etc.) | Collector receiver that ingests this signal. |
| Component | string | Application component responsible for emitting the signal (trainer, engine, agent, UI, collector). |
| File Name | string | Source file where this signal is implemented. |
| Status | enum (Planned, Implemented, Validated, Partial, Deprecated) | Current implementation state of the signal. |

## Example Row

| SLO Group / Domain | SLO ID | SLO Name | SLO Objective / Target | SLO Window / Error Budget Notes | SLI Name | SLI Definition | SLI Formula (Logical) | SLI Backend (Authoritative) | Friendly Name | Signal Type | Subtype | Canonical Name | Description | Attributes / Labels | Cardinality Notes | Prometheus? | Prometheus Query | Loki? | Loki Query | Tempo? | Tempo Query | OTLP Export Path / Env Vars | Collector Receiver | Component | File Name | Status |
|--------------------|--------|----------|-------------------------|----------------------------------|-----------|----------------|------------------------|------------------------------|---------------|-------------|---------|----------------|-------------|----------------------|-------------------|-------------|-------------------|--------|------------|---------|-------------|------------------------------|--------------------|-----------|-----------|--------|
| Learning Progress | SLO-LRN-001 | Episode Win Rate | ≥ 60% over last 1000 episodes | Sliding window: 1000 episodes; error budget = 40% | Episode Win Rate SLI | Measures percentage of episodes that result in a win | wins / total_episodes (last 1000 episodes) | Prometheus | Episode Win Flag | metric | counter | battleship_episode_win | 1 if the agent wins the episode, otherwise 0 | run_id, episode, agent_id, opponent_type, phase | Low cardinality (one row per episode) | Y | sum(battleship_episode_win) / count(battleship_episode_win) | N |  | N |  | obs/metrics.py (episode_win_counter) | otlp/grpc via OTEL_EXPORTER_OTLP_ENDPOINT | trainer | trainer/train_loop.py | Implemented |


## Catalogue

| Friendly Name | Signal Type | Subtype | Canonical Name | Component | File name | Description | Attributes/Labels | Cardinality Notes | OTLP Export Path/Env Vars | Collector Receiver | Storage Backend | Query Examples | Status |
|---------------|-------------|---------|----------------|-------------------|-----------------|-------------|-------------------|-------------------|---------------------------|--------------------|-----------------|----------------|--------|
| Game Setups Completed | Metric | Counter | `battleship_game_setup_total` | Instrumented Game | `src/battleship/engine/instrumented_game.py` | Counts randomized game setup executions | `player1_ships`,`player2_ships` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `sum(rate(battleship_game_setup_total[5m]))` | active |
| Ship Placements Attempted | Metric | Counter | `battleship_engine_ship_placements` | Engine Board | `src/battleship/engine/board.py` | Counts ship placement attempts and results | `result`,`owner` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `sum by (result) (rate(battleship_engine_ship_placements[5m]))` | active |
| Games Completed | Metric | Counter | `battleship_game_completed_total` | Instrumented Game | `src/battleship/engine/instrumented_game.py` | Increments when a game reaches a terminal winner | `winner` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `sum by (winner) (increase(battleship_game_completed_total[1h]))` | active |
| Game Duration Seconds | Metric | Histogram | `battleship_game_duration_seconds` | Instrumented Game | `src/battleship/engine/instrumented_game.py` | Measures setup→finish duration per game | `winner` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `histogram_quantile(0.9, sum by (le) (rate(battleship_game_duration_seconds_bucket[5m])))` | active |
| Engine Shots Registered | Metric | Counter | `battleship_engine_shots` | Engine Board | `src/battleship/engine/board.py` | Counts board shots labelled by hit/miss | `outcome`,`owner` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `sum by (outcome) (rate(battleship_engine_shots[5m]))` | active |
| Engine Moves Processed | Metric | Counter | `battleship_engine_moves` | Engine Game | `src/battleship/engine/game.py` | Counts validated moves taken in BattleshipGame | `result`,`player` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `sum by (player) (rate(battleship_engine_moves[5m]))` | active |
| Shots Issued | Metric | Counter | `battleship_shots_total` | Instrumented Game | `src/battleship/engine/instrumented_game.py` | Counts every move/shot taken | `player` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `sum by (player) (rate(battleship_shots_total[5m]))` | active |
| Shots by Result | Metric | Counter | `battleship_shots_by_result_total` | Instrumented Game | `src/battleship/engine/instrumented_game.py` | Counts shots broken down by hit/miss | `player`,`result` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `sum by (result) (rate(battleship_shots_by_result_total[5m]))` | active |
| Invalid Game Moves | Metric | Counter | `battleship_game_invalid_moves_total` | Instrumented Game | `src/battleship/engine/instrumented_game.py` | Tracks invalid move attempts rejected by the engine | `player`,`reason` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `increase(battleship_game_invalid_moves_total[1h])` | active |
| Environment Resets | Metric | Counter | `battleship_env_reset_total` | BattleshipEnv | `src/battleship/ai/environment.py` | Counts Gym resets | – |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `rate(battleship_env_reset_total[5m])` | active |
| Environment Reset Latency | Metric | Histogram | `battleship_env_reset_latency_ms` | BattleshipEnv | `src/battleship/ai/environment.py` | Measures reset runtime in milliseconds | – |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `histogram_quantile(0.95, sum by (le) (rate(battleship_env_reset_latency_ms_bucket[5m])))` | active |
| Environment Actions | Metric | Counter | `battleship_env_actions_total` | BattleshipEnv | `src/battleship/ai/environment.py` | Counts placement/firing actions processed | `phase`,`result` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `sum by (phase) (rate(battleship_env_actions_total[5m]))` | active |
| Environment Step Latency | Metric | Histogram | `battleship_env_step_latency_ms` | BattleshipEnv | `src/battleship/ai/environment.py` | Measures `step` call latency | `phase` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `histogram_quantile(0.9, sum by (phase, le) (rate(battleship_env_step_latency_ms_bucket[5m])))` | active |
| Environment Rewards | Metric | Counter | `battleship_env_rewards_total` | BattleshipEnv | `src/battleship/ai/environment.py` | Tallies positive/zero reward magnitudes | `phase`,`type` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `sum by (type) (rate(battleship_env_rewards_total[5m]))` | active |
| Negative Environment Rewards | Metric | Counter | `battleship_env_negative_rewards_total` | BattleshipEnv | `src/battleship/ai/environment.py` | Tracks absolute magnitude of negative rewards | `phase`,`type` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `sum(rate(battleship_env_negative_rewards_total[5m]))` | active |
| Environment Hits | Metric | Counter | `battleship_env_hits_total` | BattleshipEnv | `src/battleship/ai/environment.py` | Counts hits registered by the environment | `phase` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `rate(battleship_env_hits_total[5m])` | active |
| Environment Misses | Metric | Counter | `battleship_env_misses_total` | BattleshipEnv | `src/battleship/ai/environment.py` | Counts misses registered by the environment | `phase` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `rate(battleship_env_misses_total[5m])` | active |
| Environment Invalid Actions | Metric | Counter | `battleship_env_invalid_actions_total` | BattleshipEnv | `src/battleship/ai/environment.py` | Counts invalid placement/firing attempts | `phase` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `increase(battleship_env_invalid_actions_total[1h])` | active |
| Environment Placements Completed | Metric | Counter | `battleship_env_placement_complete_total` | BattleshipEnv | `src/battleship/ai/environment.py` | Counts when player placement phase successfully completes | – |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `increase(battleship_env_placement_complete_total[1h])` | active |
| Environment Episodes Completed | Metric | Counter | `battleship_env_episode_completed_total` | BattleshipEnv | `src/battleship/ai/environment.py` | Increments when episodes terminate/truncate | `result` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `sum by (result) (rate(battleship_env_episode_completed_total[5m]))` | active |
| Agent Actions | Metric | Counter | `battleship_agent_actions_total` | Instrumented Agent | `src/battleship/ai/instrumented_agent.py` | Counts actions chosen by the DQN agent | `mode` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `sum by (mode) (rate(battleship_agent_actions_total[5m]))` | active |
| Agent Action Latency | Metric | Histogram | `battleship_agent_action_latency_ms` | Instrumented Agent | `src/battleship/ai/instrumented_agent.py` | Measures latency of `select_action` | `mode` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `histogram_quantile(0.9, sum by (mode, le) (rate(battleship_agent_action_latency_ms_bucket[5m])))` | active |
| Agent Epsilon Value | Metric | Counter | `battleship_agent_epsilon` | Instrumented Agent | `src/battleship/ai/instrumented_agent.py` | Writes current exploration epsilon | – |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `last_over_time(battleship_agent_epsilon[5m])` | active |
| Agent Training Steps | Metric | Counter | `battleship_agent_training_steps_total` | Instrumented Agent | `src/battleship/ai/instrumented_agent.py` | Counts training step executions | – |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `rate(battleship_agent_training_steps_total[5m])` | active |
| Agent Training Latency | Metric | Histogram | `battleship_agent_training_latency_ms` | Instrumented Agent | `src/battleship/ai/instrumented_agent.py` | Measures training loop latency | – |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `histogram_quantile(0.9, sum by (le) (rate(battleship_agent_training_latency_ms_bucket[5m])))` | active |
| Agent Training Loss | Metric | Counter | `battleship_agent_training_loss` | Instrumented Agent | `src/battleship/ai/instrumented_agent.py` | Records loss value per training step | – |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `rate(battleship_agent_training_loss[5m])` | active |
| Episode Reward Histogram | Metric | Histogram | `battleship_episode_reward` | Trainer | `src/battleship/ai/training.py` | Records total reward per episode | – |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `histogram_quantile(0.5, sum by (le) (rate(battleship_episode_reward_bucket[5m])))` | active |
| Episode Mean Loss | Metric | Histogram | `battleship_episode_mean_loss` | Trainer | `src/battleship/ai/training.py` | Records mean loss per episode | – |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `histogram_quantile(0.5, sum by (le) (rate(battleship_episode_mean_loss_bucket[5m])))` | active |
| Evaluation Win Rate | Metric | Histogram | `battleship_eval_win_rate` | Trainer | `src/battleship/ai/training.py` | Records evaluation win rate after eval runs | – |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/metrics`) | `otelcol.receiver.otlp.default` | Prometheus | `histogram_quantile(0.5, sum by (le) (rate(battleship_eval_win_rate_bucket[5m])))` | active |
| Board Ship Placement Span | Span | Span | `board.place_ship` | Engine Board | `src/battleship/engine/board.py` | Wraps ship placement validation with OTEL span | `ship.type`,`ship.length`,`ship.start.row`,`ship.start.col`,`board.owner` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/traces`) | `otelcol.receiver.otlp.default` | Tempo | `span.name = "board.place_ship"` | active |
| Board Receive Shot Span | Span | Span | `board.receive_shot` | Engine Board | `src/battleship/engine/board.py` | Captures shot coordinates/outcome on target board | `shot.row`,`shot.col`,`board.owner`,`shot.outcome` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/traces`) | `otelcol.receiver.otlp.default` | Tempo | `{ span.name = "board.receive_shot" }` | active |
| Board Random Placement Span | Span | Span | `board.random_placement` | Engine Board | `src/battleship/engine/board.py` | Random fleet placement loop instrumentation | `board.owner` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/traces`) | `otelcol.receiver.otlp.default` | Tempo | `{ span.name = "board.random_placement" }` | active |
| Engine Game Span | Span | Span | `battleship.engine.game` | Instrumented Game | `src/battleship/engine/instrumented_game.py` | Root span for each simulated match | `game.id`,`winner`,`turns`,`duration_ms` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/traces`) | `otelcol.receiver.otlp.default` | Tempo | `{ span.name = "battleship.engine.game" }` | active |
| Engine Setup Span | Span | Span | `battleship.engine.setup_random` | Instrumented Game | `src/battleship/engine/instrumented_game.py` | Records random setup sequence per game | `player1_ships`,`player2_ships` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/traces`) | `otelcol.receiver.otlp.default` | Tempo | `{ span.name = "battleship.engine.setup_random" }` | active |
| Engine Make Move Span | Span | Span | `battleship.engine.make_move` | Instrumented Game | `src/battleship/engine/instrumented_game.py` | Wraps each move with attributes for coords/player | `game.id`,`player`,`coord.row`,`coord.col`,`shot_outcome`,`hit`,`sunk` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/traces`) | `otelcol.receiver.otlp.default` | Tempo | `{ span.name = "battleship.engine.make_move" }` | active |
| Engine Game Complete Span | Span | Span | `battleship.engine.game_complete` | Instrumented Game | `src/battleship/engine/instrumented_game.py` | Emits summary span at match completion | `game.id`,`winner`,`turns`,`duration_ms` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/traces`) | `otelcol.receiver.otlp.default` | Tempo | `{ span.name = "battleship.engine.game_complete" }` | active |
| Environment Reset Span | Span | Span | `battleship.env.reset` | BattleshipEnv | `src/battleship/ai/environment.py` | Tracks Gym reset context and latency | `episode_id`,`phase` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/traces`) | `otelcol.receiver.otlp.default` | Tempo | `{ span.name = "battleship.env.reset" }` | active |
| Environment Step Span | Span | Span | `battleship.env.step` | BattleshipEnv | `src/battleship/ai/environment.py` | Records step actions, rewards, invalid states | `episode_id`,`phase`,`action_index`,`reward_type`,`terminated`,`truncated` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/traces`) | `otelcol.receiver.otlp.default` | Tempo | `{ span.name = "battleship.env.step" }` | active |
| Agent Select Action Span | Span | Span | `battleship.agent.select_action` | Instrumented Agent | `src/battleship/ai/instrumented_agent.py` | Captures agent policy selection metadata | `epsilon`,`exploratory`,`action` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/traces`) | `otelcol.receiver.otlp.default` | Tempo | `{ span.name = "battleship.agent.select_action" }` | active |
| Agent Train Step Span | Span | Span | `battleship.agent.train_step` | Instrumented Agent | `src/battleship/ai/instrumented_agent.py` | Wraps replay buffer training iterations | `buffer_size`,`batch_size`,`loss` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/traces`) | `otelcol.receiver.otlp.default` | Tempo | `{ span.name = "battleship.agent.train_step" }` | active |
| Train Episode Span | Span | Span | `train_episode` | Trainer | `src/battleship/ai/training.py` | Per-episode span covering rollout metrics | `episode`,`reward`,`steps`,`mean_loss` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/traces`) | `otelcol.receiver.otlp.default` | Tempo | `span.service.name = "battleship-trainer" and span.name = "train_episode"` | active |
| Evaluate Agent Span | Span | Span | `evaluate_agent` | Trainer | `src/battleship/ai/training.py` | Evaluation span summarising win rate stats | `mean_reward`,`win_rate`,`avg_length` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/traces`) | `otelcol.receiver.otlp.default` | Tempo | `span.name = "evaluate_agent"` | active |
| Pipeline Phase Span | Span | Span | `pipeline.phase` | Training Pipeline | `scripts/auto_train_pipeline.py` | High-level span for each adaptive training phase | `phase`,`epoch` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/traces`) | `otelcol.receiver.otlp.default` | Tempo | `{ span.name = "pipeline.phase" }` | active |
| Ship Placement Failed Log | Log | Structured Log | `ship_placement_failed` | Engine Board | `src/battleship/engine/board.py` | Warning log when placement violates rules | `owner`,`ship_type`,`orientation`,`row`,`col` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship\"} |= \"ship_placement_failed\"` | active |
| Ship Placed Log | Log | Structured Log | `ship_placed` | Engine Board | `src/battleship/engine/board.py` | Info log emitted after successful placement | `owner`,`ship_type`,`orientation`,`row`,`col` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship\"} |= \"ship_placed\"` | active |
| Shot Outcome Logs | Log | Structured Log | `shot_hit` / `shot_miss` / `shot_out_of_bounds` / `shot_duplicate` | Engine Board | `src/battleship/engine/board.py` | Logs for hit/miss/errors when shots applied | `row`,`col`,`owner`,`ship_type` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship\"} |= \"shot_hit\"` | active |
| Random Ship Placement Debug | Log | Structured Log | `random_ship_placed` | Engine Board | `src/battleship/engine/board.py` | Debug log for random placement attempts | `ship_type`,`attempts`,`owner` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship\"} |= \"random_ship_placed\"` | active |
| Game Move Logs | Log | Structured Log | `make_move ... outcome` | Instrumented Game | `src/battleship/engine/instrumented_game.py` | Info log summarizing move actions/outcomes | `player`,`coord.row`,`coord.col`,`outcome` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship.engine\"} |= \"make_move\"` | active |
| Game Finished Log | Log | Structured Log | `game_finished` | Instrumented Game | `src/battleship/engine/instrumented_game.py` | Info log when a match ends with winner stats | `winner`,`turns`,`duration_s` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship.engine\"} |= \"Game finished\"` | active |
| Environment Reset Log | Log | Structured Log | `env_reset` | BattleshipEnv | `src/battleship/ai/environment.py` | Info log when env reset occurs | `phase`,`allow_agent_placement`,`allow_opponent_placement` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship.env\"} |= \"env_reset\"` | active |
| Invalid Action Log | Log | Structured Log | `invalid_action` | BattleshipEnv | `src/battleship/ai/environment.py` | Warning log when invalid placement/firing occurs | `phase`,`reason`,`actor`,`ship_type` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship.env\"} |= \"invalid_action\"` | active |
| Player Placement Complete Log | Log | Structured Log | `player_placement_complete` | BattleshipEnv | `src/battleship/ai/environment.py` | Info log when agent finishes placement | `actor` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship.env\"} |= \"player_placement_complete\"` | active |
| Opponent Placement Logs | Log | Structured Log | `opponent_manual_placement_*` | BattleshipEnv | `src/battleship/ai/environment.py` | Info logs when manual opponent placement occurs | `actor`,`phase` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship.env\"} |= \"opponent_manual_placement\"` | active |
| Environment Phase Transition Log | Log | Structured Log | `env_phase_transition` | BattleshipEnv | `src/battleship/ai/environment.py` | Info log when environment switches phases | `phase` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship.env\"} |= \"env_phase_transition\"` | active |
| Trainer Initialised Log | Log | Structured Log | `trainer_initialised` | Trainer | `src/battleship/ai/training.py` | Info log when trainer boots with config summary | `episodes`,`save_dir`,`opponent` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship.ai\"} |= \"trainer_initialised\"` | active |
| Train Episode Log | Log | Structured Log | `train_episode` | Trainer | `src/battleship/ai/training.py` | Info log emitted per training episode | `episode`,`reward`,`steps`,`mean_loss`,`epsilon` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship.ai\"} |= \"train_episode\"` | active |
| Evaluate Agent Log | Log | Structured Log | `evaluate_agent` | Trainer | `src/battleship/ai/training.py` | Info log after evaluation summarizing metrics | `mean_reward`,`win_rate`,`avg_length` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship.ai\"} |= \"evaluate_agent\"` | active |
| Pipeline Phase Logs | Log | Structured Log | `phase_start` / `phase_episode` / `phase_epoch_eval` / `phase_criteria_met` | Training Pipeline | `scripts/auto_train_pipeline.py` | Structured logs for adaptive phase telemetry | `phase`,`episode`,`epoch`,`win_rate`,`opponent` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship.pipeline\"} |= \"phase_start\"` | active |
| Agent Action Log | Log | Structured Log | `select_action ...` | Instrumented Agent | `src/battleship/ai/instrumented_agent.py` | Info log emitted during action selection with epsilon context | `epsilon`,`action`,`exploratory` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship.agent\"} |= \"select_action\"` | active |
| Agent Train Step Log | Log | Structured Log | `train_step ...` | Instrumented Agent | `src/battleship/ai/instrumented_agent.py` | Info log recording loss values from training | `loss` |  | `OTEL_EXPORTER_OTLP_ENDPOINT` (`v1/logs`) | `otelcol.receiver.otlp.default` | Loki | `{app=\"battleship.agent\"} |= \"train_step\"` | active |
| Game Sessions Started | Metric | Counter | `battleship_game_started_total` | Instrumented Game | `TODO.md` | Planned counter for game start events (not emitted) | – |  | – (not implemented) | – | – | – | deprecated |
| Agent Inference Duration | Metric | Histogram | `battleship_agent_inference_duration_seconds` | Instrumented Agent | `TODO.md` | Planned histogram for `select_action` duration in seconds | – |  | – (not implemented) | – | – | – | deprecated |
| Agent Training Step Duration | Metric | Histogram | `battleship_agent_training_step_duration_seconds` | Instrumented Agent | `TODO.md` | Planned histogram for per-step training duration | – |  | – (not implemented) | – | – | – | deprecated |
| Environment Resets Total (legacy) | Metric | Counter | `battleship_env_resets_total` | BattleshipEnv | `TODO.md` | Early naming for reset counter (superseded by `battleship_env_reset_total`) | – |  | – (not implemented) | – | – | – | deprecated |
| Environment Step Duration Seconds | Metric | Histogram | `battleship_env_step_duration_seconds` | BattleshipEnv | `TODO.md` | Planned histogram for env step duration in seconds | – |  | – (not implemented) | – | – | – | deprecated |
| Environment Reward Value | Metric | Histogram | `battleship_env_reward_value` | BattleshipEnv | `TODO.md` | Optional histogram proposal for raw reward magnitude | – |  | – (not implemented) | – | – | – | deprecated |
